{% extends "organization/edit_base.html" %}
{% import 'macros/form.html' as form %}


{% macro checkbox(name, id='', label='', value='', checked=false, placeholder='', error="", classes=[], attrs={}, is_required=false) %}
{%- set extra_html = caller() if caller -%}
<div class="control-group{{ " " ~ classes | join(" ") }}{% if error %} error{% endif %}">
    <div class="controls">
        <label class="checkbox" for="{{ id or name }}">
            <input id="{{ id or name }}" type="checkbox" name="{{ name }}" value="{{ value | empty_and_escape }}" {{ "checked " if checked }} {{ form.attributes(attrs) }} />
            <div class="slider round">
                <span class="check-on">On</span>
                <span class="check-off">Off</span>
            </div>
            {{ label or name }}
            {% if is_required %}{{ form.input_required() }}{% endif %}
            {% if error and error is iterable %}<strong class="error-inline">{{ error|join(', ') }}</strong>{% endif %}

        </label>
        {{ extra_html }}

    </div>
</div>
{% endmacro %}



{% block subtitle %}{{ _('data.world') }} - {{ super() }}{% endblock %}



{% block primary_content_inner %}
<h3>{{ _('Dataset Status') }}:</h3>
<table class="table-striped table-hover table-condensed table">
    <tr>
        <th>{{ _('Pending') }}</th>
        <td>{{ stats.pending|default(0) }}</td>
    </tr>
    <tr>
        <th>{{ _('Up to date') }}</th>
        <td>{{ stats['up-to-date']|default(0) }}</td>
    </tr>
    <tr>
        <th>{{ _('Failed') }}</th>
        <td>
            <a href="{{ h.url_for('list_dataworld_failed') }}" }}">
                {{ stats.failed|default(0) }}
            </a>
        </td>
    </tr>
</table>
<hr/>
<p>
  {% trans %}
    Ultrices neque ornare aenean euismod elementum nisi, quis eleifend quam adipiscing vitae proin sagittis, nisl rhoncus mattis rhoncus, urna neque viverra justo, nec ultrices dui sapien eget. Ultrices eros, in cursus turpis massa tincidunt dui ut ornare lectus sit. Luctus venenatis, lectus magna fringilla urna, porttitor rhoncus dolor purus non enim praesent elementum. Gravida rutrum quisque non tellus orci, ac auctor augue mauris augue! Gravida cum sociis natoque penatibus et magnis dis! In hac habitasse platea dictumst quisque sagittis, purus sit amet volutpat consequat, mauris nunc congue nisi, vitae suscipit tellus mauris a diam maecenas sed enim ut sem viverra.
  {% endtrans %}
</p>
<form method="POST" class="form-horizontal" data-module="data-world-credentials-form">

    {{ form.errors(error_summary) }}

    {{ form.hidden('show_links', value=False) }}

    {% call checkbox('show_links', label='data.world links', value=True, checked=h.asbool(c.credentials.show_links), error=errors.show_links, classes=['switch']) %}
      <a href="#" data-content="{{ _('Quam vulputate dignissim suspendisse in est ante in nibh mauris, cursus? Erat pellentesque adipiscing commodo elit, at. Lobortis scelerisque fermentum dui faucibus in ornare quam viverra orci sagittis eu volutpat odio facilisis mauris sit amet massa vitae tortor condimentum lacinia! In nibh mauris, cursus mattis molestie a, iaculis at erat pellentesque adipiscing commodo elit. Volutpat sed cras ornare arcu? Adipiscing elit pellentesque habitant morbi tristique? Nibh ipsum consequat nisl, vel pretium lectus. Nec ultrices dui sapien eget mi proin sed libero enim, sed faucibus turpis in eu mi bibendum neque egestas congue quisque egestas diam in arcu cursus euismod quis!') }}" data-module="info-popover">
        <i class="icon-info-sign" ></i>
    </a>
    {% endcall %}

    {{ form.hidden('integration', value=False) }}
    {% call checkbox('integration', label='data.world integration', value=True, checked=h.asbool(c.credentials.integration), error=errors.integration, classes=['switch']) %}
      <a href="#"  data-content="{{ _('Felis eget velit aliquet sagittis id consectetur purus ut faucibus pulvinar elementum integer enim neque, volutpat ac tincidunt vitae, semper quis lectus nulla at volutpat diam ut venenatis tellus in? Velit dignissim sodales ut eu sem integer vitae justo eget.') }}" data-module="info-popover">
        <i class="icon-info-sign" ></i>
    </a>
    {% endcall %}

    {% set info_template =  ''' <a href="#" data-content="{0}" data-module="info-popover"> <i class="icon-info-sign" ></i> </a>'''|safe %}

{% set info = info_template.format( _('Quam vulputate dignissim suspendisse in est ante in nibh mauris, cursus? Erat pellentesque adipiscing commodo elit, at. Lobortis scelerisque fermentum dui faucibus in ornare quam viverra orci sagittis eu volutpat odio facilisis mauris sit amet massa vitae tortor condimentum lacinia! In nibh mauris, cursus mattis molestie a, iaculis at erat pellentesque adipiscing commodo elit. Volutpat sed cras ornare arcu? Adipiscing elit pellentesque habitant morbi tristique? Nibh ipsum consequat nisl, vel pretium lectus. Nec ultrices dui sapien eget mi proin sed libero enim, sed faucibus turpis in eu mi bibendum neque egestas congue quisque egestas diam in arcu cursus euismod quis!') ) %}
    {{ form.input('owner', label='data.world owner ID' + info, value=c.credentials.owner, error=errors.owner) }}



    {% set info = info_template.format(_('Quam vulpu. Volutpat sed cras ornare arcu? Adipiscing elit pellentesque habitant morbi tristique? Ni. Nec ultrices dui sapien eget mi proin sed libero enim, sed faucibus turpis in eu mi bibendum neque egestas congue quisque egestas diam in arcu cursus euismod quis!')) %}
    {{ form.textarea('key', label='data.world API key' + info, value=c.credentials.key, error=errors.key) }}
    <div class="form-actions">
        <button class="btn btn-primary" type="submit">{{ _('Save') }}</button>
    </div>
</form>
{% endblock %}
